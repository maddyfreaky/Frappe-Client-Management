import{j as b,r as c,c as p,A as u,v as h,a as l,b as t,t as o,F as x,l as g,k as C,a2 as D,a9 as w,o as n}from"./index-BQMqF1jf.js";const B={setup(){const _=w(),s=c({}),i=c(!1),e=c(null),m=c(_.params.id),d=p({url:"client_management.client_management.doctype.activity.activity.get_task_with_comments",params:{task_id:m.value},auto:!1,onSuccess(a){a.error?(e.value=a.message||"Failed to load task details",s.value={},i.value=!1):(s.value=a.task_details,i.value=a.is_client,e.value=null)},onError(a){e.value="Failed to load task details. Please try again.",console.error("API Error:",a),s.value={},i.value=!1}}),r=u(()=>{var a;return((a=d.data)==null?void 0:a.external_comments)||[]}),y=u(()=>{var a;return i.value?[]:((a=d.data)==null?void 0:a.internal_comments)||[]}),k=u(()=>d.loading);function v(a){return a?new Date(a).toLocaleDateString():""}h(()=>{m.value?d.reload():e.value="No task ID provided"});function f(){e.value=null,d.reload()}return{task:s,loading:k,error:e,externalComments:r,internalComments:y,isClient:i,formatDate:v,retry:f,taskId:m}}},F={class:"container mx-auto p-6"},N={key:0,class:"text-center py-8"},E={key:1,class:"space-y-6"},I={class:"text-2xl font-bold"},P={class:"grid grid-cols-2 gap-4 bg-white p-4 rounded-lg shadow"},A={class:"mt-1 text-sm text-gray-900"},L={class:"mt-1 text-sm text-gray-900"},R={class:"mt-1 text-sm text-gray-900"},S={class:"mt-1 text-sm text-gray-900"},T={class:"mt-1 text-sm text-gray-900"},V={class:"bg-white p-4 rounded-lg shadow"},j={class:"mt-1 text-sm text-gray-900 whitespace-pre-line"},z={class:"bg-white p-4 rounded-lg shadow"},M={key:0},q={class:"text-sm"},G={class:"text-xs text-gray-500 mt-1"},H={key:1,class:"text-sm text-gray-500"},J={key:0,class:"bg-white p-4 rounded-lg shadow"},K={key:0},O={class:"text-sm"},Q={class:"text-xs text-gray-500 mt-1"},U={key:1,class:"text-sm text-gray-500"};function W(_,s,i,e,m,d){return n(),l("div",F,[e.loading?(n(),l("div",N," Loading task details... ")):(n(),l("div",E,[t("h1",I,o(e.task.task_name),1),t("div",P,[t("div",null,[s[0]||(s[0]=t("label",{class:"block text-sm font-medium text-gray-700"},"Activity",-1)),t("p",A,o(e.task.activity_name),1)]),t("div",null,[s[1]||(s[1]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),t("p",L,o(e.task.status),1)]),t("div",null,[s[2]||(s[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"From Date",-1)),t("p",R,o(e.formatDate(e.task.from_date)),1)]),t("div",null,[s[3]||(s[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"To Date",-1)),t("p",S,o(e.formatDate(e.task.to_date)),1)]),t("div",null,[s[4]||(s[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"Priority",-1)),t("p",T,o(e.task.priority),1)])]),t("div",V,[s[5]||(s[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),t("p",j,o(e.task.description),1)]),t("div",{class:D(["grid gap-4",e.isClient?"grid-cols-1":"grid-cols-2"])},[t("div",z,[s[6]||(s[6]=t("h3",{class:"font-medium text-gray-700 mb-2"},"External Comments",-1)),e.externalComments.length?(n(),l("div",M,[(n(!0),l(x,null,g(e.externalComments,r=>(n(),l("div",{key:r.name,class:"mb-3 p-2 border-b"},[t("p",q,o(r.comment),1),t("p",G,"By "+o(r.user_fullname)+" on "+o(e.formatDate(r.creation)),1)]))),128))])):(n(),l("p",H,"No external comments"))]),e.isClient?C("",!0):(n(),l("div",J,[s[7]||(s[7]=t("h3",{class:"font-medium text-gray-700 mb-2"},"Internal Comments",-1)),e.internalComments.length?(n(),l("div",K,[(n(!0),l(x,null,g(e.internalComments,r=>(n(),l("div",{key:r.name,class:"mb-3 p-2 border-b"},[t("p",O,o(r.comment),1),t("p",Q,"By "+o(r.user_fullname)+" on "+o(e.formatDate(r.creation)),1)]))),128))])):(n(),l("p",U,"No internal comments"))]))],2)]))])}const Y=b(B,[["render",W]]);export{Y as default};
//# sourceMappingURL=TaskDetailPage-DPp7hxZc.js.map
