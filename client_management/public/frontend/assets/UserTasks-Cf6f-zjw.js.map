{"version":3,"file":"UserTasks-Cf6f-zjw.js","sources":["../../../../frontend/src/pages/UserTasks.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-7xl mx-auto p-6\">\r\n    <div class=\"flex justify-between items-center mb-6\">\r\n      <h1 class=\"text-2xl font-semibold\">My Tasks</h1>\r\n    </div>\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"loading\" class=\"text-center py-8\">\r\n      Loading tasks...\r\n    </div>\r\n\r\n    \r\n    <!-- Tasks Table -->\r\n    <div v-if=\"!loading\" class=\"bg-white rounded-lg shadow overflow-hidden\">\r\n\r\n      <div class=\"overflow-x-auto\">\r\n         <!-- Search Field -->\r\n    <div class=\"mt-4\">\r\n      <div class=\"relative rounded-md shadow-sm max-w-md\">\r\n        <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n          <svg class=\"h-5 w-5 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fill-rule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clip-rule=\"evenodd\" />\r\n          </svg>\r\n        </div>\r\n        <input\r\n          v-model=\"searchQuery\"\r\n          type=\"text\"\r\n          class=\"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2\"\r\n          placeholder=\"Search ...\"\r\n          @input=\"filterTasks\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n        <table class=\"min-w-full divide-y divide-gray-200 mt-5\">\r\n          <thead class=\"bg-gray-50\">\r\n            <tr>\r\n              <th v-for=\"column in columns\" :key=\"column.key\" scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                {{ column.label }}\r\n              </th>\r\n              <th scope=\"col\" class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n            Comments\r\n        </th> \r\n            </tr>\r\n          </thead>\r\n       \r\n          <tbody class=\"bg-white divide-y divide-gray-200\">\r\n            <tr v-for=\"task in paginatedTasks\" :key=\"task.name\" :class=\"{'opacity-50': isTaskDisabled(task)}\">\r\n             \r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                {{ task.activity_name }}\r\n              </td>\r\n\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n              <router-link :to=\"`/tasks/${task.name}`\" class=\"text-indigo-600 hover:text-indigo-900\">\r\n                {{ task.task_name }}\r\n              </router-link>\r\n            </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                {{ formatDate(task.from_date) }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                {{ formatDate(task.to_date) }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <span :class=\"priorityClass(task.priority)\" class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full\">\r\n                  {{ task.priority }}\r\n                </span>\r\n              </td>\r\n             \r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n  <div class=\"relative\">\r\n    <select \r\n      v-model=\"task.status\" \r\n      @focus=\"previousStatus = task.status\"\r\n      @change=\"handleStatusChange(task)\"\r\n      :disabled=\"isTaskDisabled(task) || task.updating\"\r\n      class=\"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n    >\r\n      <option v-for=\"option in statusOptions\" :key=\"option\" :value=\"option\">\r\n        {{ option }}\r\n      </option>\r\n    </select>\r\n    <svg \r\n      v-if=\"task.updating\"\r\n      class=\"animate-spin h-5 w-5 text-indigo-600 absolute right-2 top-2\" \r\n      xmlns=\"http://www.w3.org/2000/svg\" \r\n      fill=\"none\" \r\n      viewBox=\"0 0 24 24\"\r\n    >\r\n      <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n      <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n    </svg>\r\n  </div>\r\n</td>\r\n            \r\n            \r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <div class=\"flex space-x-2\">\r\n                  <button \r\n                    v-if=\"!isClient\"\r\n                    @click=\"openCommentModal(task, 'Internal')\"\r\n                    class=\"p-1 rounded-md bg-blue-100 text-blue-800 hover:bg-blue-200\"\r\n                    title=\"Internal Comments\"\r\n                  >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                      <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z\" clip-rule=\"evenodd\" />\r\n                    </svg>\r\n                  </button>\r\n                  <button \r\n                    @click=\"openCommentModal(task, 'External')\"\r\n                    class=\"p-1 rounded-md bg-green-100 text-green-800 hover:bg-green-200\"\r\n                    title=\"External Comments\"\r\n                  >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"CurrentColor\">\r\n                      <path fill-rule=\"evenodd\" d=\"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z\" clip-rule=\"evenodd\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        \r\n        <!-- Pagination Controls -->\r\n        <div class=\"flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200\">\r\n          <div class=\"flex-1 flex justify-between sm:hidden\">\r\n            <button \r\n              @click=\"currentPage = currentPage - 1\" \r\n              :disabled=\"currentPage === 1\"\r\n              class=\"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\r\n            >\r\n              Previous\r\n            </button>\r\n            <button \r\n              @click=\"currentPage = currentPage + 1\" \r\n              :disabled=\"currentPage === totalPages\"\r\n              class=\"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\r\n            >\r\n              Next\r\n            </button>\r\n          </div>\r\n          <div class=\"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between\">\r\n            <div>\r\n              <p class=\"text-sm text-gray-700\">\r\n                Showing\r\n                <span class=\"font-medium\">{{ (currentPage - 1) * pageSize + 1 }}</span>\r\n                to\r\n                <span class=\"font-medium\">{{ Math.min(currentPage * pageSize, filteredTasks.length) }}</span>\r\n                of\r\n                <span class=\"font-medium\">{{ filteredTasks.length }}</span>\r\n                results\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <nav class=\"relative z-0 inline-flex rounded-md shadow-sm -space-x-px\" aria-label=\"Pagination\">\r\n                <button \r\n                  @click=\"currentPage = currentPage - 1\" \r\n                  :disabled=\"currentPage === 1\"\r\n                  :class=\"{'opacity-50 cursor-not-allowed': currentPage === 1, 'hover:bg-gray-50': currentPage > 1}\"\r\n                  class=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500\"\r\n                >\r\n                  <span class=\"sr-only\">Previous</span>\r\n                  <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                    <path fill-rule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\r\n                  </svg>\r\n                </button>\r\n                \r\n                <!-- Page numbers -->\r\n                <button \r\n                  v-for=\"page in visiblePages\" \r\n                  :key=\"page\"\r\n                  @click=\"currentPage = page\"\r\n                  :class=\"{'z-10 bg-indigo-50 border-indigo-500 text-indigo-600': currentPage === page, 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50': currentPage !== page}\"\r\n                  class=\"relative inline-flex items-center px-4 py-2 border text-sm font-medium\"\r\n                >\r\n                  {{ page }}\r\n                </button>\r\n                \r\n                <button \r\n                  @click=\"currentPage = currentPage + 1\" \r\n                  :disabled=\"currentPage === totalPages\"\r\n                  :class=\"{'opacity-50 cursor-not-allowed': currentPage === totalPages, 'hover:bg-gray-50': currentPage < totalPages}\"\r\n                  class=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500\"\r\n                >\r\n                  <span class=\"sr-only\">Next</span>\r\n                  <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                    <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\" />\r\n                  </svg>\r\n                </button>\r\n              </nav>\r\n            </div>\r\n            \r\n            <!-- Page size selector -->\r\n            <div class=\"flex items-center\">\r\n              <span class=\"text-sm text-gray-700 mr-2 text-nowrap\">Rows per page:</span>\r\n              <select \r\n                v-model=\"pageSize\" \r\n                @change=\"currentPage = 1\"\r\n                class=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md\"\r\n              >\r\n                <option v-for=\"option in pageSizeOptions\" :key=\"option\" :value=\"option\">\r\n                  {{ option }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  <!-- Comment Modal -->\r\n<div v-if=\"showCommentModal\" class=\"fixed inset-0 z-50 overflow-y-auto\">\r\n  <div class=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n    <!-- Background overlay -->\r\n    <div class=\"fixed inset-0 transition-opacity\" aria-hidden=\"true\">\r\n      <div class=\"absolute inset-0 bg-gray-500 opacity-75\" @click=\"closeCommentModal\"></div>\r\n    </div>\r\n\r\n    <!-- Modal container -->\r\n    <div class=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full\">\r\n      <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n        <div class=\"sm:flex sm:items-start\">\r\n          <div class=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\">\r\n            <h3 class=\"text-lg leading-6 font-medium text-gray-900\">\r\n              {{ selectedCommentType }} Comments - Activity: {{ currentActivity.activity_name }}\r\n            </h3>\r\n            <div class=\"mt-4\">\r\n              <!-- Comments List -->\r\n              <div class=\"border rounded-lg p-4 max-h-96 overflow-y-auto mb-4\">\r\n                <div v-for=\"comment in comments\" :key=\"comment.name\" class=\"mb-4 last:mb-0\">\r\n                  <div class=\"flex justify-between items-start\">\r\n                    <div class=\"font-medium\">{{ comment.user_fullname || comment.comment_by.split('@')[0] }}</div>\r\n                    <div class=\"text-sm text-gray-500\">{{ formatDateTime(comment.comment_date) }}</div>\r\n                  </div>\r\n                  <div class=\"mt-1 text-sm text-gray-800\">{{ comment.comment }}</div>\r\n                  <div v-if=\"comment.attachment\" class=\"mt-2\">\r\n                    <a :href=\"comment.attachment\" target=\"_blank\" class=\"text-blue-600 hover:text-blue-800 text-sm\">\r\n                      View Attachment\r\n                    </a>\r\n                  </div>\r\n                  <div v-if=\"comment.is_temp\" class=\"mt-1 text-xs text-gray-500\">\r\n                    Posting...\r\n                  </div>\r\n                  \r\n                  <!-- Seen By Section - Only show for the last comment -->\r\n                  <div v-if=\"isLastComment(comment) && seenByUsers.length > 0\" class=\"mt-2 pt-2 border-t border-gray-100\">\r\n                    <div class=\"flex items-center text-xs text-gray-500\">\r\n                      <span class=\"mr-1\">Seen by:</span>\r\n                      <div class=\"flex flex-wrap\">\r\n                        <span v-for=\"user in seenByUsers\" :key=\"user.name\" class=\"mr-2\">\r\n                          {{ user.full_name || user.user }}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Seen By Footer -->\r\n              <div v-if=\"seenByUsers.length > 0\" class=\"flex items-center text-xs text-gray-500 mb-2\">\r\n                <span class=\"mr-1\">Seen by:</span>\r\n                <div class=\"flex flex-wrap\">\r\n                  <span v-for=\"user in seenByUsers\" :key=\"user.name\" class=\"mr-2\">\r\n                    {{ user.full_name || user.user }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- New Comment Form -->\r\n              <div class=\"border-t pt-4\">\r\n                <textarea\r\n                  v-model=\"newComment\"\r\n                  class=\"w-full border rounded-md p-2\"\r\n                  rows=\"3\"\r\n                  placeholder=\"Type your comment here...\"\r\n                ></textarea>\r\n                <div class=\"flex justify-between items-center mt-2\">\r\n                  <div class=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"file\"\r\n                      ref=\"fileInput\"\r\n                      @change=\"handleFileUpload\"\r\n                      class=\"hidden\"\r\n                    />\r\n                    <button\r\n                      @click=\"$refs.fileInput.click()\"\r\n                      class=\"text-sm text-gray-600 hover:text-gray-800\"\r\n                    >\r\n                      Attach File\r\n                    </button>\r\n                    <span v-if=\"attachment\" class=\"text-sm text-gray-600 flex items-center\">\r\n                      {{ attachment.name }}\r\n                      <button @click=\"removeAttachment\" class=\"ml-1 text-red-500 hover:text-red-700\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                          <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\r\n                        </svg>\r\n                      </button>\r\n                    </span>\r\n                  </div>\r\n                  <button\r\n                    @click=\"submitComment\"\r\n                    class=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n                    :disabled=\"!newComment\"\r\n                  >\r\n                    Post Comment\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\r\n          @click=\"closeCommentModal\"\r\n        >\r\n          Close\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n    <!-- Task Details Modal -->\r\n    <Dialog\r\n      v-model=\"showTaskModal\"\r\n      :title=\"selectedTask.task_name || 'Task Details'\"\r\n      size=\"xl\"\r\n      :dismissable=\"true\"\r\n    >\r\n      <div v-if=\"selectedTask.name\" class=\"space-y-4\">\r\n        <div class=\"grid grid-cols-2 gap-4\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Activity</label>\r\n            <p class=\"mt-1 text-sm text-gray-900\">{{ selectedTask.activity_name }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Status</label>\r\n            <p class=\"mt-1 text-sm text-gray-900\">{{ selectedTask.status }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">From Date</label>\r\n            <p class=\"mt-1 text-sm text-gray-900\">{{ formatDate(selectedTask.from_date) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">To Date</label>\r\n            <p class=\"mt-1 text-sm text-gray-900\">{{ formatDate(selectedTask.to_date) }}</p>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700\">Priority</label>\r\n            <p class=\"mt-1 text-sm text-gray-900\">{{ selectedTask.priority }}</p>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700\">Description</label>\r\n          <p class=\"mt-1 text-sm text-gray-900 whitespace-pre-line\">{{ selectedTask.description }}</p>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"text-center py-8\">\r\n        Loading task details...\r\n      </div>\r\n      <template #actions>\r\n        <Button\r\n          variant=\"solid\"\r\n          @click=\"showTaskModal = false\"\r\n        >\r\n          Close\r\n        </Button>\r\n      </template>\r\n    </Dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { Button, Dialog, createResource } from 'frappe-ui'\r\n\r\nconst columns = [\r\n  { label: 'Activity', key: 'activity_name' },\r\n  { label: 'Task Name', key: 'task_name' },\r\n  { label: 'From Date', key: 'from_date' },\r\n  { label: 'To Date', key: 'to_date' },\r\n  { label: 'Priority', key: 'priority' },\r\n  { label: 'Status', key: 'status' }\r\n]\r\n\r\nconst statusOptions = ['Not Started', 'Working', 'Completed']\r\n\r\nconst seenByUsers = ref([]);\r\nconst seenByInterval = ref(null);\r\nconst hasMarkedAsSeen = ref(false);\r\nconst currentActivityKey = ref('');\r\nconst latestCommentTime = ref(null);\r\n\r\n\r\nconst tasks = ref([])\r\nconst filteredTasks = ref([])\r\nconst loading = ref(true)\r\nconst errorMessage = ref('')\r\nconst showTaskModal = ref(false)\r\nconst selectedTask = ref({\r\n  task_name: '',\r\n  activity_name: '',\r\n  status: '',\r\n  from_date: '',\r\n  to_date: '',\r\n  priority: '',\r\n  description: ''\r\n})\r\nconst previousStatus = ref(null)\r\n\r\nconst showCommentModal = ref(false)\r\nconst selectedCommentType = ref('')\r\nconst comments = ref([])\r\nconst newComment = ref('')\r\nconst attachment = ref(null)\r\nconst fileInput = ref(null)\r\nconst currentActivity = ref({})\r\n\r\n// Search query - Moved to the top to avoid reference errors\r\nconst searchQuery = ref('')\r\n\r\n// Pagination variables\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(10)\r\nconst pageSizeOptions = [5, 10, 20, 50]\r\n\r\n// Pagination computed properties\r\nconst totalPages = computed(() => {\r\n  return Math.ceil(filteredTasks.value.length / pageSize.value)\r\n})\r\n\r\nconst paginatedTasks = computed(() => {\r\n  const startIndex = (currentPage.value - 1) * pageSize.value\r\n  return filteredTasks.value.slice(startIndex, startIndex + pageSize.value)\r\n})\r\n\r\nconst visiblePages = computed(() => {\r\n  const maxVisiblePages = 5\r\n  const halfVisible = Math.floor(maxVisiblePages / 2)\r\n  \r\n  let startPage = Math.max(1, currentPage.value - halfVisible)\r\n  let endPage = Math.min(totalPages.value, startPage + maxVisiblePages - 1)\r\n  \r\n  if (endPage - startPage + 1 < maxVisiblePages) {\r\n    startPage = Math.max(1, endPage - maxVisiblePages + 1)\r\n  }\r\n  \r\n  const pages = []\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i)\r\n  }\r\n  \r\n  return pages\r\n})\r\n\r\n// Watch for changes to reset to first page\r\nwatch(searchQuery, () => {\r\n  currentPage.value = 1\r\n})\r\n\r\nwatch(filteredTasks, () => {\r\n  currentPage.value = 1\r\n})\r\n\r\nconst isLastComment = (comment) => {\r\n  return comments.value.length > 0 && comment.name === comments.value[0].name;\r\n};\r\n\r\n// API call to mark comments as seen\r\nconst markCommentsAsSeen = async () => {\r\n  // Create a unique key for this activity+comment_type combination\r\n  const activityKey = `${currentActivity.value.name}_${selectedCommentType.value}`;\r\n  \r\n  // If we've already marked as seen for this specific activity, skip\r\n  if (!showCommentModal.value || !currentActivity.value.name || hasMarkedAsSeen.value === activityKey) {\r\n    return { success: true };\r\n  }\r\n  \r\n  try {\r\n    const formData = new FormData();\r\n    formData.append('activity_name', currentActivity.value.name);\r\n    formData.append('comment_type', selectedCommentType.value);\r\n    \r\n    // Add CSRF token if available\r\n    if (window.frappe?.csrf_token) {\r\n      formData.append('csrf_token', window.frappe.csrf_token);\r\n    }\r\n\r\n    const response = await fetch(\r\n      '/api/method/client_management.client_management.doctype.activity_comment.activity_comment.mark_comments_as_seen',\r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const result = await response.json();\r\n    \r\n    // Mark that we've already done this for the current activity\r\n    hasMarkedAsSeen.value = activityKey;\r\n    \r\n    return result;\r\n  } catch (error) {\r\n    console.error('Error marking comments as seen:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n// API call to get seen by users\r\nconst fetchSeenByUsers = async () => {\r\n  if (!showCommentModal.value || !currentActivity.value.name) return;\r\n  \r\n  try {\r\n    const resource = createResource({\r\n      url: 'client_management.client_management.doctype.activity_comment.activity_comment.get_seen_by_users',\r\n      method: 'GET',\r\n      params: {\r\n        activity_name: currentActivity.value.name,\r\n        comment_type: selectedCommentType.value,\r\n        // Pass the latest comment time to only get users who saw after that\r\n        since: latestCommentTime.value\r\n      }\r\n    });\r\n\r\n    const response = await resource.fetch();\r\n    \r\n    // Handle both response structures\r\n    let users = [];\r\n    if (response.success) {\r\n      users = response.users || [];\r\n    } else if (response.message && response.message.success) {\r\n      users = response.message.users || [];\r\n    }\r\n    \r\n    // Filter out duplicates on client side\r\n    const uniqueUsers = [];\r\n    const seenUsers = new Set();\r\n    \r\n    for (const user of users) {\r\n      if (!seenUsers.has(user.user)) {\r\n        seenUsers.add(user.user);\r\n        uniqueUsers.push(user);\r\n      }\r\n    }\r\n    \r\n    seenByUsers.value = uniqueUsers;\r\n    \r\n  } catch (error) {\r\n    console.error('Error fetching seen by users:', error);\r\n    seenByUsers.value = [];\r\n  }\r\n};\r\n\r\nconst trackSeenBy = async () => {\r\n  // First mark the comments as seen by the current user\r\n  const markResult = await markCommentsAsSeen();\r\n  \r\n  console.log('markResult:', markResult); // Debug log\r\n  \r\n  // Check if the operation was successful\r\n  if (markResult && (markResult.success || (markResult.message && markResult.message.success))) {\r\n    console.log(\"Tracking successful, fetching seen by users\");\r\n    // Then fetch the updated list of users who have seen the comments\r\n    await fetchSeenByUsers();\r\n  } else {\r\n    console.log(\"Tracking failed or returned unexpected format\");\r\n  }\r\n};\r\n\r\nconst setupSeenByTracking = () => {\r\n  // Clear any existing interval\r\n  if (seenByInterval.value) {\r\n    clearInterval(seenByInterval.value);\r\n    seenByInterval.value = null;\r\n  }\r\n  \r\n  // Start tracking if modal is open\r\n  if (showCommentModal.value) {\r\n    // Track immediately\r\n    trackSeenBy();\r\n    \r\n    // Set up interval to update seen by list periodically\r\n    seenByInterval.value = setInterval(trackSeenBy, 30000); // Update every 30 seconds\r\n  }\r\n};\r\n\r\n\r\n\r\nconst openCommentModal = async (task, commentType) => {\r\n  resetCommentForm();\r\n  selectedCommentType.value = commentType;\r\n  currentActivity.value = {\r\n    name: task.activity_docname,\r\n    activity_name: task.activity_name\r\n  };\r\n  showCommentModal.value = true;\r\n  // Use explicit parameters when fetching comments\r\n  await fetchComments(task.activity_docname, commentType);\r\n  setupSeenByTracking();\r\n};\r\n\r\nconst closeCommentModal = () => {\r\n  resetCommentForm();\r\n  showCommentModal.value = false;\r\nif (seenByInterval.value) {\r\n    clearInterval(seenByInterval.value);\r\n    seenByInterval.value = null;\r\n  }\r\n  seenByUsers.value = [];\r\n  hasMarkedAsSeen.value = false;\r\n  currentActivityKey.value = '';\r\n  latestCommentTime.value = null;\r\n};\r\n\r\nwatch(showCommentModal, (newValue) => {\r\n  if (newValue) {\r\n    // Small delay to ensure DOM is rendered\r\n    setTimeout(setupSeenByTracking, 100);\r\n  } else {\r\n    if (seenByInterval.value) {\r\n      clearInterval(seenByInterval.value);\r\n      seenByInterval.value = null;\r\n    }\r\n    seenByUsers.value = [];\r\n  }\r\n});\r\n\r\nconst resetCommentForm = () => {\r\n  newComment.value = ''\r\n  attachment.value = null\r\n  if (fileInput.value) fileInput.value.value = ''\r\n}\r\n\r\nconst removeAttachment = () => {\r\n  attachment.value = null\r\n  if (fileInput.value) fileInput.value.value = ''\r\n}\r\n\r\nconst isClient = ref(false);\r\n\r\n// Fetch client status when component mounts\r\nonMounted(async () => {\r\n  try {\r\n    const response = await fetch('/api/method/client_management.client_management.doctype.activity_comment.activity_comment.is_user_client');\r\n    const result = await response.json();\r\n    isClient.value = result.message || false;\r\n  } catch (error) {\r\n    console.error(\"Error checking user role:\", error);\r\n    isClient.value = false;\r\n  }\r\n});\r\n\r\nconst formatDateTime = (dateString) => {\r\n  if (!dateString) return ''\r\n  const date = new Date(dateString)\r\n  return date.toLocaleString() \r\n}\r\n\r\nconst fetchComments = async (activityName = null, commentType = null) => {\r\n  try {\r\n    // Use provided parameters or fall back to the component state\r\n    const activityNameToUse = activityName || currentActivity.value.name;\r\n    const commentTypeToUse = commentType || selectedCommentType.value;\r\n    \r\n    // Check if we have the required parameters\r\n    if (!activityNameToUse || !commentTypeToUse) {\r\n      console.error(\"Missing parameters for fetching comments\");\r\n      return;\r\n    }\r\n\r\n    const resource = createResource({\r\n      url: 'client_management.client_management.doctype.activity_comment.activity_comment.get_activity_comments',\r\n      method: 'GET',\r\n      params: {\r\n        activity_name: activityNameToUse,\r\n        comment_type: commentTypeToUse\r\n      }\r\n    });\r\n\r\n    const response = await resource.fetch();\r\n\r\n    if (response.success) {\r\n      comments.value = response.comments.map(comment => ({\r\n        ...comment,\r\n        user_fullname: comment.comment_by_fullname || comment.comment_by.split('@')[0],\r\n      }));\r\n       if (comments.value.length > 0) {\r\n        latestCommentTime.value = comments.value[0].comment_date;\r\n        console.log('Latest comment time:', latestCommentTime.value);\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching comments:\", error);\r\n  }\r\n};\r\n\r\nconst handleFileUpload = (e) => {\r\n  const file = e.target.files[0]\r\n  if (file) {\r\n    attachment.value = file\r\n  }\r\n}\r\n\r\nconst submitComment = async () => {\r\n  try {\r\n    if (!newComment.value.trim()) {\r\n      errorMessage.value = \"Please enter a comment\";\r\n      return;\r\n    }\r\n\r\n    // Store the comment text before resetting the form\r\n    const commentText = newComment.value.trim();\r\n\r\n    const formData = new FormData();\r\n    formData.append('activity_name', currentActivity.value.name);\r\n    formData.append('comment_type', selectedCommentType.value);\r\n    formData.append('comment', commentText);\r\n\r\n    if (attachment.value) {\r\n      formData.append('file', attachment.value);\r\n    }\r\n\r\n    // Add CSRF token if available\r\n    if (window.frappe?.csrf_token) {\r\n      formData.append('csrf_token', window.frappe.csrf_token);\r\n    }\r\n\r\n    // Show loading state\r\n    const loadingComment = {\r\n      name: 'loading-' + Date.now(),\r\n      comment: commentText,\r\n      comment_by: window.frappe?.session?.user || 'Unknown User',\r\n      comment_by_fullname: 'Posting...',\r\n      user_fullname: 'Posting...',\r\n      comment_date: new Date().toISOString(),\r\n      is_loading: true,\r\n      attachment: null,\r\n    };\r\n    \r\n    comments.value.unshift(loadingComment);\r\n    resetCommentForm();\r\n\r\n    const response = await fetch(\r\n      '/api/method/client_management.client_management.doctype.activity_comment.activity_comment.add_activity_comment',\r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n      }\r\n    );\r\n\r\n    const result = await response.json();\r\n    console.log('API Response:', result);\r\n\r\n    if (result.message && result.message.success) {\r\n      // Remove loading comment\r\n      comments.value = comments.value.filter(c => !c.is_loading);\r\n      \r\n      // Add the new comment directly to the list instead of refreshing\r\n      const newCommentData = {\r\n        name: result.message.comment_id,\r\n        comment: commentText, // Use the stored comment text\r\n        comment_by: window.frappe?.session?.user || 'Unknown User',\r\n        comment_by_fullname: result.message.user_fullname,\r\n        user_fullname: result.message.user_fullname,\r\n        comment_date: result.message.comment_date,\r\n        attachment: result.message.attachment_url\r\n      };\r\n      \r\n      comments.value.unshift(newCommentData);\r\n      seenByUsers.value = [];\r\n      hasMarkedAsSeen.value = false;\r\n      latestCommentTime.value = result.message.comment_date;\r\n      \r\n      // Show success message using Frappe notification (no alert)\r\n      if (typeof frappe !== 'undefined' && frappe.show_alert) {\r\n        frappe.show_alert({\r\n          message: result.message.message || 'Comment added successfully',\r\n          indicator: 'green'\r\n        }, 3);\r\n      }\r\n      // Removed the alert() fallback\r\n    } else {\r\n      // Remove loading comment on error\r\n      comments.value = comments.value.filter(c => !c.is_loading);\r\n      \r\n      let errorMsg = \"Failed to submit comment\";\r\n      \r\n      if (result.message && result.message.message) {\r\n        errorMsg = result.message.message;\r\n      } else if (result.message) {\r\n        errorMsg = typeof result.message === 'string' ? result.message : \"Server error occurred\";\r\n      }\r\n      \r\n      errorMessage.value = errorMsg;\r\n      \r\n      // Show error message using Frappe notification (no alert)\r\n      if (typeof frappe !== 'undefined' && frappe.show_alert) {\r\n        frappe.show_alert({\r\n          message: errorMsg,\r\n          indicator: 'red'\r\n        }, 5);\r\n      }\r\n      // Removed the alert() fallback\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Comment submission failed:\", error);\r\n    // Remove loading comment on error\r\n    comments.value = comments.value.filter(c => !c.is_loading);\r\n    \r\n    const errorMsg = error.message || \"Failed to submit comment. Please try again.\";\r\n    errorMessage.value = errorMsg;\r\n    \r\n    // Show error message using Frappe notification (no alert)\r\n    if (typeof frappe !== 'undefined' && frappe.show_alert) {\r\n      frappe.show_alert({\r\n        message: errorMsg,\r\n        indicator: 'red'\r\n      }, 5);\r\n    }\r\n    // Removed the alert() fallback\r\n  }\r\n};\r\n\r\nconst createFileFormData = () => {\r\n  const formData = new FormData()\r\n  formData.append('file', attachment.value)\r\n  formData.append('doctype', 'Activity Comment')\r\n  formData.append('fieldname', 'attachment')\r\n  formData.append('is_private', 1)\r\n  return formData\r\n}\r\n\r\n// Format date\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return ''\r\n  return new Date(dateString).toLocaleDateString()\r\n}\r\n\r\n// Priority badge class\r\nconst priorityClass = (priority) => {\r\n  const classes = {\r\n    'High': 'bg-red-100 text-red-800',\r\n    'Medium': 'bg-yellow-100 text-yellow-800',\r\n    'Low': 'bg-green-100 text-green-800'\r\n  }\r\n  return classes[priority] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\n// Check if task should be disabled\r\nconst isTaskDisabled = (task) => {\r\n  return task.parent_task && task.parent_status !== 'Completed'\r\n}\r\n\r\n// Open task modal\r\nconst openTaskModal = (task) => {\r\n  selectedTask.value = { ...task }\r\n  showTaskModal.value = true\r\n}\r\n\r\n// Update task status\r\nconst handleStatusChange = async (task) => {\r\n  if (task.status === 'Completed') {\r\n    const confirmed = confirm('Are you sure you want to mark this task as Completed?');\r\n    if (!confirmed) {\r\n      task.status = previousStatus.value;\r\n      return;\r\n    }\r\n  }\r\n  await updateStatus(task);\r\n};\r\n\r\nconst updateStatus = async (task) => {\r\n  task.updating = true;\r\n  \r\n  try {\r\n    const resource = createResource({\r\n      url: 'client_management.client_management.doctype.activity.activity.update_activity_task_status',\r\n      method: 'POST',\r\n      params: {\r\n        activity_name: task.activity_docname,\r\n        task_name: task.name,\r\n        status: task.status\r\n      }\r\n    });\r\n    \r\n    await resource.submit();\r\n    await fetchTasks(); // Refresh the task list\r\n    \r\n    // Show success message\r\n    if (window.frappe) {\r\n      window.frappe.show_alert({\r\n        message: 'Task status updated successfully',\r\n        indicator: 'green'\r\n      }, 3);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Status update failed:\", error);\r\n    // Revert the status in UI\r\n    task.status = previousStatus.value;\r\n    if (window.frappe) {\r\n      window.frappe.show_alert({\r\n        message: 'Failed to update task status',\r\n        indicator: 'red'\r\n      }, 5);\r\n    }\r\n  } finally {\r\n    task.updating = false;\r\n  }\r\n};\r\n\r\n// Filter tasks\r\nconst filterTasks = () => {\r\n  if (!searchQuery.value) {\r\n    filteredTasks.value = [...tasks.value]\r\n    return\r\n  }\r\n  \r\n  const query = searchQuery.value.toLowerCase()\r\n  filteredTasks.value = tasks.value.filter(task => \r\n    task.activity_name.toLowerCase().includes(query) ||\r\n    task.task_name.toLowerCase().includes(query) ||\r\n    task.priority.toLowerCase().includes(query) ||\r\n    task.status.toLowerCase().includes(query)\r\n  )\r\n}\r\n\r\n// Fetch tasks\r\nconst fetchTasks = async () => {\r\n  loading.value = true\r\n  errorMessage.value = ''\r\n  \r\n  try {\r\n    const resource = createResource({\r\n      url: 'client_management.client_management.doctype.activity.activity.get_user_activity_tasks',\r\n      method: 'GET'\r\n    })\r\n    \r\n    const response = await resource.fetch()\r\n    \r\n    if (response.success) {\r\n      tasks.value = response.tasks.map(task => ({\r\n        ...task,\r\n        parent_status: task.parent_status || null,\r\n        updating: false // Initialize updating flag\r\n      }))\r\n      filteredTasks.value = [...tasks.value]\r\n    } else {\r\n      throw new Error(response.message || 'Failed to load tasks')\r\n    }\r\n  } catch (error) {\r\n    errorMessage.value = error.message || 'Failed to load tasks'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// Initialize\r\nonMounted(() => {\r\n  fetchTasks()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.opacity-50 {\r\n  opacity: 0.5;\r\n  pointer-events: none;\r\n}\r\n\r\n.animate-spin {\r\n  animation: spin 1s linear infinite;\r\n}\r\n@keyframes spin {\r\n  from { transform: rotate(0deg); }\r\n  to { transform: rotate(360deg); }\r\n}\r\n</style>"],"names":["columns","statusOptions","seenByUsers","ref","seenByInterval","hasMarkedAsSeen","currentActivityKey","latestCommentTime","tasks","filteredTasks","loading","errorMessage","showTaskModal","selectedTask","previousStatus","showCommentModal","selectedCommentType","comments","newComment","attachment","fileInput","currentActivity","searchQuery","currentPage","pageSize","pageSizeOptions","totalPages","computed","paginatedTasks","startIndex","visiblePages","halfVisible","startPage","endPage","pages","i","watch","isLastComment","comment","markCommentsAsSeen","__async","activityKey","formData","_a","response","result","error","fetchSeenByUsers","createResource","users","uniqueUsers","seenUsers","user","trackSeenBy","markResult","setupSeenByTracking","openCommentModal","task","commentType","resetCommentForm","fetchComments","closeCommentModal","newValue","removeAttachment","isClient","onMounted","formatDateTime","dateString","activityName","activityNameToUse","commentTypeToUse","__spreadProps","__spreadValues","handleFileUpload","e","file","submitComment","commentText","loadingComment","_c","_b","c","newCommentData","_e","_d","errorMsg","formatDate","priorityClass","priority","isTaskDisabled","handleStatusChange","updateStatus","fetchTasks","filterTasks","query","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","$event","_hoisted_7","_hoisted_8","_Fragment","_renderList","column","_toDisplayString","_hoisted_9","_normalizeClass","_hoisted_10","_hoisted_11","_createVNode","_component_router_link","_createTextVNode","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","option","_hoisted_18","_vModelSelect","_hoisted_19","_cache","_hoisted_20","_hoisted_21","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","page","_hoisted_35","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","$refs","_hoisted_63","_hoisted_64","_unref","Dialog","Button","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73"],"mappings":"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"}