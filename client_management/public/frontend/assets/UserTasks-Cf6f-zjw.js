var Le=Object.defineProperty,Ue=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var me=(_,v,d)=>v in _?Le(_,v,{enumerable:!0,configurable:!0,writable:!0,value:d}):_[v]=d,ee=(_,v)=>{for(var d in v||(v={}))Ae.call(v,d)&&me(_,d,v[d]);if(de)for(var d of de(v))Fe.call(v,d)&&me(_,d,v[d]);return _},te=(_,v)=>Ue(_,$e(v));var b=(_,v,d)=>new Promise((h,g)=>{var $=x=>{try{C(d.next(x))}catch(w){g(w)}},K=x=>{try{C(d.throw(x))}catch(w){g(w)}},C=x=>x.done?h(x.value):Promise.resolve(x.value).then($,K);C((d=d.apply(_,v)).next())});import{h as Be,r as c,A as se,a6 as ae,q as ve,a as i,b as e,i as k,a7 as R,ae as pe,F as S,k as P,g as U,t as r,a2 as N,a8 as fe,d as le,w as q,u as ge,c as G,f as Ie,o as u,l as Ee,_ as je}from"./index-CK1KYSDl.js";const Ne={class:"max-w-7xl mx-auto p-6"},Oe={key:0,class:"text-center py-8"},He={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},Re={class:"overflow-x-auto"},qe={class:"mt-4"},Ge={class:"relative rounded-md shadow-sm max-w-md"},Ke={class:"min-w-full divide-y divide-gray-200 mt-5"},Qe={class:"bg-gray-50"},We={class:"bg-white divide-y divide-gray-200"},Je={class:"px-6 py-4 whitespace-nowrap"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ye={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"px-6 py-4 whitespace-nowrap"},et={class:"px-6 py-4 whitespace-nowrap"},tt={class:"px-6 py-4 whitespace-nowrap"},st={class:"relative"},at=["onUpdate:modelValue","onFocus","onChange","disabled"],lt=["value"],nt={key:0,class:"animate-spin h-5 w-5 text-indigo-600 absolute right-2 top-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ot={class:"px-6 py-4 whitespace-nowrap"},it={class:"flex space-x-2"},rt=["onClick"],ut=["onClick"],ct={class:"flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200"},dt={class:"flex-1 flex justify-between sm:hidden"},mt=["disabled"],vt=["disabled"],pt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},ft={class:"text-sm text-gray-700"},gt={class:"font-medium"},yt={class:"font-medium"},_t={class:"font-medium"},xt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},wt=["disabled"],ht=["onClick"],bt=["disabled"],kt={class:"flex items-center"},Ct=["value"],Tt={key:2,class:"fixed inset-0 z-50 overflow-y-auto"},Mt={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},St={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},Pt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Vt={class:"sm:flex sm:items-start"},zt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Dt={class:"text-lg leading-6 font-medium text-gray-900"},Lt={class:"mt-4"},Ut={class:"border rounded-lg p-4 max-h-96 overflow-y-auto mb-4"},$t={class:"flex justify-between items-start"},At={class:"font-medium"},Ft={class:"text-sm text-gray-500"},Bt={class:"mt-1 text-sm text-gray-800"},It={key:0,class:"mt-2"},Et=["href"],jt={key:1,class:"mt-1 text-xs text-gray-500"},Nt={key:2,class:"mt-2 pt-2 border-t border-gray-100"},Ot={class:"flex items-center text-xs text-gray-500"},Ht={class:"flex flex-wrap"},Rt={key:0,class:"flex items-center text-xs text-gray-500 mb-2"},qt={class:"flex flex-wrap"},Gt={class:"border-t pt-4"},Kt={class:"flex justify-between items-center mt-2"},Qt={class:"flex items-center space-x-2"},Wt={key:0,class:"text-sm text-gray-600 flex items-center"},Jt=["disabled"],Xt={key:0,class:"space-y-4"},Yt={class:"grid grid-cols-2 gap-4"},Zt={class:"mt-1 text-sm text-gray-900"},es={class:"mt-1 text-sm text-gray-900"},ts={class:"mt-1 text-sm text-gray-900"},ss={class:"mt-1 text-sm text-gray-900"},as={class:"mt-1 text-sm text-gray-900"},ls={class:"mt-1 text-sm text-gray-900 whitespace-pre-line"},ns={key:1,class:"text-center py-8"},os={__name:"UserTasks",setup(_){const v=[{label:"Activity",key:"activity_name"},{label:"Task Name",key:"task_name"},{label:"From Date",key:"from_date"},{label:"To Date",key:"to_date"},{label:"Priority",key:"priority"},{label:"Status",key:"status"}],d=["Not Started","Working","Completed"],h=c([]),g=c(null),$=c(!1),K=c(""),C=c(null),x=c([]),w=c([]),O=c(!0),B=c(""),Q=c(!1),M=c({task_name:"",activity_name:"",status:"",from_date:"",to_date:"",priority:"",description:""}),W=c(null),V=c(!1),z=c(""),f=c([]),A=c(""),D=c(null),I=c(null),T=c({}),E=c(""),n=c(1),L=c(10),ye=[5,10,20,50],j=se(()=>Math.ceil(w.value.length/L.value)),_e=se(()=>{const a=(n.value-1)*L.value;return w.value.slice(a,a+L.value)}),xe=se(()=>{const t=Math.floor(2.5);let l=Math.max(1,n.value-t),s=Math.min(j.value,l+5-1);s-l+1<5&&(l=Math.max(1,s-5+1));const o=[];for(let m=l;m<=s;m++)o.push(m);return o});ae(E,()=>{n.value=1}),ae(w,()=>{n.value=1});const we=a=>f.value.length>0&&a.name===f.value[0].name,he=()=>b(this,null,function*(){var t;const a=`${T.value.name}_${z.value}`;if(!V.value||!T.value.name||$.value===a)return{success:!0};try{const l=new FormData;l.append("activity_name",T.value.name),l.append("comment_type",z.value),(t=window.frappe)!=null&&t.csrf_token&&l.append("csrf_token",window.frappe.csrf_token);const s=yield fetch("/api/method/client_management.client_management.doctype.activity_comment.activity_comment.mark_comments_as_seen",{method:"POST",body:l});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=yield s.json();return $.value=a,o}catch(l){return console.error("Error marking comments as seen:",l),{success:!1,error:l.message}}}),be=()=>b(this,null,function*(){if(!(!V.value||!T.value.name))try{const t=yield G({url:"client_management.client_management.doctype.activity_comment.activity_comment.get_seen_by_users",method:"GET",params:{activity_name:T.value.name,comment_type:z.value,since:C.value}}).fetch();let l=[];t.success?l=t.users||[]:t.message&&t.message.success&&(l=t.message.users||[]);const s=[],o=new Set;for(const m of l)o.has(m.user)||(o.add(m.user),s.push(m));h.value=s}catch(a){console.error("Error fetching seen by users:",a),h.value=[]}}),ne=()=>b(this,null,function*(){const a=yield he();console.log("markResult:",a),a&&(a.success||a.message&&a.message.success)?(console.log("Tracking successful, fetching seen by users"),yield be()):console.log("Tracking failed or returned unexpected format")}),oe=()=>{g.value&&(clearInterval(g.value),g.value=null),V.value&&(ne(),g.value=setInterval(ne,3e4))},ie=(a,t)=>b(this,null,function*(){J(),z.value=t,T.value={name:a.activity_docname,activity_name:a.activity_name},V.value=!0,yield Te(a.activity_docname,t),oe()}),re=()=>{J(),V.value=!1,g.value&&(clearInterval(g.value),g.value=null),h.value=[],$.value=!1,K.value="",C.value=null};ae(V,a=>{a?setTimeout(oe,100):(g.value&&(clearInterval(g.value),g.value=null),h.value=[])});const J=()=>{A.value="",D.value=null,I.value&&(I.value.value="")},ke=()=>{D.value=null,I.value&&(I.value.value="")},X=c(!1);ve(()=>b(this,null,function*(){try{const t=yield(yield fetch("/api/method/client_management.client_management.doctype.activity_comment.activity_comment.is_user_client")).json();X.value=t.message||!1}catch(a){console.error("Error checking user role:",a),X.value=!1}}));const Ce=a=>a?new Date(a).toLocaleString():"",Te=(a=null,t=null)=>b(this,null,function*(){try{const l=a||T.value.name,s=t||z.value;if(!l||!s){console.error("Missing parameters for fetching comments");return}const m=yield G({url:"client_management.client_management.doctype.activity_comment.activity_comment.get_activity_comments",method:"GET",params:{activity_name:l,comment_type:s}}).fetch();m.success&&(f.value=m.comments.map(y=>te(ee({},y),{user_fullname:y.comment_by_fullname||y.comment_by.split("@")[0]})),f.value.length>0&&(C.value=f.value[0].comment_date,console.log("Latest comment time:",C.value)))}catch(l){console.error("Error fetching comments:",l)}}),Me=a=>{const t=a.target.files[0];t&&(D.value=t)},Se=()=>b(this,null,function*(){var a,t,l,s,o;try{if(!A.value.trim()){B.value="Please enter a comment";return}const m=A.value.trim(),y=new FormData;y.append("activity_name",T.value.name),y.append("comment_type",z.value),y.append("comment",m),D.value&&y.append("file",D.value),(a=window.frappe)!=null&&a.csrf_token&&y.append("csrf_token",window.frappe.csrf_token);const Y={name:"loading-"+Date.now(),comment:m,comment_by:((l=(t=window.frappe)==null?void 0:t.session)==null?void 0:l.user)||"Unknown User",comment_by_fullname:"Posting...",user_fullname:"Posting...",comment_date:new Date().toISOString(),is_loading:!0,attachment:null};f.value.unshift(Y),J();const p=yield(yield fetch("/api/method/client_management.client_management.doctype.activity_comment.activity_comment.add_activity_comment",{method:"POST",body:y})).json();if(console.log("API Response:",p),p.message&&p.message.success){f.value=f.value.filter(Z=>!Z.is_loading);const F={name:p.message.comment_id,comment:m,comment_by:((o=(s=window.frappe)==null?void 0:s.session)==null?void 0:o.user)||"Unknown User",comment_by_fullname:p.message.user_fullname,user_fullname:p.message.user_fullname,comment_date:p.message.comment_date,attachment:p.message.attachment_url};f.value.unshift(F),h.value=[],$.value=!1,C.value=p.message.comment_date,typeof frappe!="undefined"&&frappe.show_alert&&frappe.show_alert({message:p.message.message||"Comment added successfully",indicator:"green"},3)}else{f.value=f.value.filter(Z=>!Z.is_loading);let F="Failed to submit comment";p.message&&p.message.message?F=p.message.message:p.message&&(F=typeof p.message=="string"?p.message:"Server error occurred"),B.value=F,typeof frappe!="undefined"&&frappe.show_alert&&frappe.show_alert({message:F,indicator:"red"},5)}}catch(m){console.error("Comment submission failed:",m),f.value=f.value.filter(Y=>!Y.is_loading);const y=m.message||"Failed to submit comment. Please try again.";B.value=y,typeof frappe!="undefined"&&frappe.show_alert&&frappe.show_alert({message:y,indicator:"red"},5)}}),H=a=>a?new Date(a).toLocaleDateString():"",Pe=a=>({High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[a]||"bg-gray-100 text-gray-800",ue=a=>a.parent_task&&a.parent_status!=="Completed",Ve=a=>b(this,null,function*(){if(a.status==="Completed"&&!confirm("Are you sure you want to mark this task as Completed?")){a.status=W.value;return}yield ze(a)}),ze=a=>b(this,null,function*(){a.updating=!0;try{yield G({url:"client_management.client_management.doctype.activity.activity.update_activity_task_status",method:"POST",params:{activity_name:a.activity_docname,task_name:a.name,status:a.status}}).submit(),yield ce(),window.frappe&&window.frappe.show_alert({message:"Task status updated successfully",indicator:"green"},3)}catch(t){console.error("Status update failed:",t),a.status=W.value,window.frappe&&window.frappe.show_alert({message:"Failed to update task status",indicator:"red"},5)}finally{a.updating=!1}}),De=()=>{if(!E.value){w.value=[...x.value];return}const a=E.value.toLowerCase();w.value=x.value.filter(t=>t.activity_name.toLowerCase().includes(a)||t.task_name.toLowerCase().includes(a)||t.priority.toLowerCase().includes(a)||t.status.toLowerCase().includes(a))},ce=()=>b(this,null,function*(){O.value=!0,B.value="";try{const t=yield G({url:"client_management.client_management.doctype.activity.activity.get_user_activity_tasks",method:"GET"}).fetch();if(t.success)x.value=t.tasks.map(l=>te(ee({},l),{parent_status:l.parent_status||null,updating:!1})),w.value=[...x.value];else throw new Error(t.message||"Failed to load tasks")}catch(a){B.value=a.message||"Failed to load tasks"}finally{O.value=!1}});return ve(()=>{ce()}),(a,t)=>{const l=Ie("router-link");return u(),i("div",Ne,[t[33]||(t[33]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-semibold"},"My Tasks")],-1)),O.value?(u(),i("div",Oe," Loading tasks... ")):k("",!0),O.value?k("",!0):(u(),i("div",He,[e("div",Re,[e("div",qe,[e("div",Ge,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),R(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>E.value=s),type:"text",class:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2",placeholder:"Search ...",onInput:De},null,544),[[pe,E.value]])])]),e("table",Ke,[e("thead",Qe,[e("tr",null,[(u(),i(S,null,P(v,s=>e("th",{key:s.key,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},r(s.label),1)),64)),t[12]||(t[12]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Comments ",-1))])]),e("tbody",We,[(u(!0),i(S,null,P(_e.value,s=>(u(),i("tr",{key:s.name,class:N({"opacity-50":ue(s)})},[e("td",Je,r(s.activity_name),1),e("td",Xe,[le(l,{to:`/tasks/${s.name}`,class:"text-indigo-600 hover:text-indigo-900"},{default:q(()=>[U(r(s.task_name),1)]),_:2},1032,["to"])]),e("td",Ye,r(H(s.from_date)),1),e("td",Ze,r(H(s.to_date)),1),e("td",et,[e("span",{class:N([Pe(s.priority),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},r(s.priority),3)]),e("td",tt,[e("div",st,[R(e("select",{"onUpdate:modelValue":o=>s.status=o,onFocus:o=>W.value=s.status,onChange:o=>Ve(s),disabled:ue(s)||s.updating,class:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[(u(),i(S,null,P(d,o=>e("option",{key:o,value:o},r(o),9,lt)),64))],40,at),[[fe,s.status]]),s.updating?(u(),i("svg",nt,t[13]||(t[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0)])]),e("td",ot,[e("div",it,[X.value?k("",!0):(u(),i("button",{key:0,onClick:o=>ie(s,"Internal"),class:"p-1 rounded-md bg-blue-100 text-blue-800 hover:bg-blue-200",title:"Internal Comments"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z","clip-rule":"evenodd"})],-1)]),8,rt)),e("button",{onClick:o=>ie(s,"External"),class:"p-1 rounded-md bg-green-100 text-green-800 hover:bg-green-200",title:"External Comments"},t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"CurrentColor"},[e("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z","clip-rule":"evenodd"})],-1)]),8,ut)])])],2))),128))])]),e("div",ct,[e("div",dt,[e("button",{onClick:t[1]||(t[1]=s=>n.value=n.value-1),disabled:n.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Previous ",8,mt),e("button",{onClick:t[2]||(t[2]=s=>n.value=n.value+1),disabled:n.value===j.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Next ",8,vt)]),e("div",pt,[e("div",null,[e("p",ft,[t[16]||(t[16]=U(" Showing ")),e("span",gt,r((n.value-1)*L.value+1),1),t[17]||(t[17]=U(" to ")),e("span",yt,r(Math.min(n.value*L.value,w.value.length)),1),t[18]||(t[18]=U(" of ")),e("span",_t,r(w.value.length),1),t[19]||(t[19]=U(" results "))])]),e("div",null,[e("nav",xt,[e("button",{onClick:t[3]||(t[3]=s=>n.value=n.value-1),disabled:n.value===1,class:N([{"opacity-50 cursor-not-allowed":n.value===1,"hover:bg-gray-50":n.value>1},"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500"])},t[20]||(t[20]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),10,wt),(u(!0),i(S,null,P(xe.value,s=>(u(),i("button",{key:s,onClick:o=>n.value=s,class:N([{"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":n.value===s,"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":n.value!==s},"relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},r(s),11,ht))),128)),e("button",{onClick:t[4]||(t[4]=s=>n.value=n.value+1),disabled:n.value===j.value,class:N([{"opacity-50 cursor-not-allowed":n.value===j.value,"hover:bg-gray-50":n.value<j.value},"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500"])},t[21]||(t[21]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),10,bt)])]),e("div",kt,[t[22]||(t[22]=e("span",{class:"text-sm text-gray-700 mr-2 text-nowrap"},"Rows per page:",-1)),R(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>L.value=s),onChange:t[6]||(t[6]=s=>n.value=1),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[(u(),i(S,null,P(ye,s=>e("option",{key:s,value:s},r(s),9,Ct)),64))],544),[[fe,L.value]])])])])])])),V.value?(u(),i("div",Tt,[e("div",Mt,[e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75",onClick:re})]),e("div",St,[e("div",Pt,[e("div",Vt,[e("div",zt,[e("h3",Dt,r(z.value)+" Comments - Activity: "+r(T.value.activity_name),1),e("div",Lt,[e("div",Ut,[(u(!0),i(S,null,P(f.value,s=>(u(),i("div",{key:s.name,class:"mb-4 last:mb-0"},[e("div",$t,[e("div",At,r(s.user_fullname||s.comment_by.split("@")[0]),1),e("div",Ft,r(Ce(s.comment_date)),1)]),e("div",Bt,r(s.comment),1),s.attachment?(u(),i("div",It,[e("a",{href:s.attachment,target:"_blank",class:"text-blue-600 hover:text-blue-800 text-sm"}," View Attachment ",8,Et)])):k("",!0),s.is_temp?(u(),i("div",jt," Posting... ")):k("",!0),we(s)&&h.value.length>0?(u(),i("div",Nt,[e("div",Ot,[t[23]||(t[23]=e("span",{class:"mr-1"},"Seen by:",-1)),e("div",Ht,[(u(!0),i(S,null,P(h.value,o=>(u(),i("span",{key:o.name,class:"mr-2"},r(o.full_name||o.user),1))),128))])])])):k("",!0)]))),128))]),h.value.length>0?(u(),i("div",Rt,[t[24]||(t[24]=e("span",{class:"mr-1"},"Seen by:",-1)),e("div",qt,[(u(!0),i(S,null,P(h.value,s=>(u(),i("span",{key:s.name,class:"mr-2"},r(s.full_name||s.user),1))),128))])])):k("",!0),e("div",Gt,[R(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>A.value=s),class:"w-full border rounded-md p-2",rows:"3",placeholder:"Type your comment here..."},null,512),[[pe,A.value]]),e("div",Kt,[e("div",Qt,[e("input",{type:"file",ref_key:"fileInput",ref:I,onChange:Me,class:"hidden"},null,544),e("button",{onClick:t[8]||(t[8]=s=>a.$refs.fileInput.click()),class:"text-sm text-gray-600 hover:text-gray-800"}," Attach File "),D.value?(u(),i("span",Wt,[U(r(D.value.name)+" ",1),e("button",{onClick:ke,class:"ml-1 text-red-500 hover:text-red-700"},t[25]||(t[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])):k("",!0)]),e("button",{onClick:Se,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:!A.value}," Post Comment ",8,Jt)])])])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:re}," Close ")])])])])):k("",!0),le(ge(je),{modelValue:Q.value,"onUpdate:modelValue":t[10]||(t[10]=s=>Q.value=s),title:M.value.task_name||"Task Details",size:"xl",dismissable:!0},{actions:q(()=>[le(ge(Ee),{variant:"solid",onClick:t[9]||(t[9]=s=>Q.value=!1)},{default:q(()=>t[32]||(t[32]=[U(" Close ")])),_:1,__:[32]})]),default:q(()=>[M.value.name?(u(),i("div",Xt,[e("div",Yt,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Activity",-1)),e("p",Zt,r(M.value.activity_name),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),e("p",es,r(M.value.status),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"From Date",-1)),e("p",ts,r(H(M.value.from_date)),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"To Date",-1)),e("p",ss,r(H(M.value.to_date)),1)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Priority",-1)),e("p",as,r(M.value.priority),1)])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",ls,r(M.value.description),1)])])):(u(),i("div",ns," Loading task details... "))]),_:1},8,["modelValue","title"])])}}},cs=Be(os,[["__scopeId","data-v-f345064f"]]);export{cs as default};
//# sourceMappingURL=UserTasks-Cf6f-zjw.js.map
